# AI Agent Manager - HI Add-on Configuration
name: AI Agent Manager - HI
version: "1.1.0"
slug: ai_agent_manager_hi
description: AI-powered meta-agent that monitors and manages all Home Assistant agents using Claude
url: "https://github.com/AlohaFlyer/home-assistant-addons"
arch:
  - aarch64
  - amd64
  - armv7
  - i386
startup: application
boot: auto
init: false

# Options schema
options:
  claude_api_key: ""
  ha_token: ""
  check_interval_minutes: 5
  autonomous_actions: true
  learning_enabled: true
  notification_level: "warning"
  max_auto_fixes_per_hour: 10
  log_level: "info"
  # Hybrid LLM settings (cost optimization - 90%+ savings)
  hybrid_mode_enabled: true
  ollama_url: "http://homeassistant.local:11434"
  ollama_model: "llama3.2:3b"
  claude_model: "claude-3-haiku-20240307"
  escalation_threshold: 0.7

schema:
  claude_api_key: str
  ha_token: str
  check_interval_minutes: int(1,60)
  autonomous_actions: bool
  learning_enabled: bool
  notification_level: list(debug|info|warning|error)
  max_auto_fixes_per_hour: int(0,100)
  log_level: list(debug|info|warning|error)
  # Hybrid LLM settings
  hybrid_mode_enabled: bool
  ollama_url: url
  ollama_model: str
  claude_model: str
  escalation_threshold: "float(0,1)?"

# Resources
ports:
  8765/tcp: null
ports_description:
  8765/tcp: WebSocket API for real-time status

# Permissions
homeassistant_api: true
hassio_api: true
auth_api: true

# Environment
environment:
  PYTHONUNBUFFERED: "1"

# Map config folder for persistent storage
map:
  - config:rw
  - share:rw

# Labels
labels:
  io.hass.name: "AI Agent Manager - HI"
  io.hass.description: "AI-powered meta-agent using Claude"
  io.hass.type: "addon"
